// Kiwi's Tech Tree Overhaul (Partupgrade Settings)
// Version 2.0
// Created: 22 November 2020 for KSP 1.9.1 to 1.10.1
// Last Updated: 19 July 2021 for KSP 1.12.1
// 24 November 2020: Consolidated the upgrade settings to one patch to reduce the number of patches impacting all parts.
// 2 January 2021: Removed add cost to part upgrades as plugin colors upgrades to distinguish from parts.
// 19 July 2021: Moved engine, RCS and Strucutal upgrade settings here for consistency.
// Special thanks to flart for the suggestion.

//// General Patches for catch all \\\\
@PART[*]:FOR[KiwiTechTree]
{
	multiplierProcessed = no

	batteryUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/BATTERY$
	sasUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/SAS$
	solarUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/SOLAR$
	heatUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/HEAT$
	structuralUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/STRUCTURAL$
	kerbalengineerUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/KERBALENGINEER$
}

//// Battery Patches \\\\
@PARTUPGRADE[*]:HAS[#type[battery]]:FOR[KiwiTechTree]
{
	batteryUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/BATTERY$
}
// Deletes the unused part upgrades
!PARTUPGRADE[*]:HAS[#batteryUpgrade[off]]:LAST[KiwiTechTree] {}


//// Engine Patches \\\\
@PART[*]:HAS[@MODULE[ModuleEngines*]]:FOR[KiwiTechTree]
{
	engineUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/ENGINE$
}
@PARTUPGRADE[*]:HAS[#type[engine]]:FOR[KiwiTechTree]
{
	engineUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/ENGINE$
}
// Deletes the unused part upgrades
!PARTUPGRADE[*]:HAS[#engineUpgrade[off]]:LAST[KiwiTechTree] {}


//// RCS Patches \\\\
@PART[*]:HAS[@MODULE[ModuleRCSFX]]:FOR[KiwiTechTree]
{
	rcsUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/RCS$
	rcsPrimaryUpgrade = #$@KIWI_RCS_SETTINGS/PRIMARY$
	rcsColdGasUpgrade = #$@KIWI_RCS_SETTINGS/COLDGAS$
}
@PART[*]:HAS[@RESOURCE[MonoPropellant]]:FOR[KiwiTechTree]
{
	%rcsUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/RCS$
	%rcsPrimaryUpgrade = #$@KIWI_RCS_SETTINGS/PRIMARY$
	%rcsColdGasUpgrade = #$@KIWI_RCS_SETTINGS/COLDGAS$
}
@PARTUPGRADE[*]:HAS[#type[rcs]]:FOR[KiwiTechTree]
{
	rcsUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/RCS$
}
// Deletes the unused part upgrades
!PARTUPGRADE[*]:HAS[#rcsUpgrade[off]]:LAST[KiwiTechTree] {}


//// Structural Patches \\\\
@PARTUPGRADE[*]:HAS[#type[structural]]:FOR[KiwiTechTree]
{
	structuralUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/STRUCTURAL$
}
// Deletes the unused part upgrades
!PARTUPGRADE[*]:HAS[#structuralUpgrade[off]]:LAST[KiwiTechTree] {}


//// Heat Patches \\\\
@PARTUPGRADE[*]:HAS[#type[heat]]:FOR[KiwiTechTree]
{
	heatUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/HEAT$
}
// Deletes the unused part upgrades
!PARTUPGRADE[*]:HAS[#heatUpgrade[off]]:LAST[KiwiTechTree] {}


//// Solar Patches \\\\
@PARTUPGRADE[*]:HAS[#type[solar]]:FOR[KiwiTechTree]
{
	solarUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/SOLAR$
}
// Deletes the unused part upgrades
!PARTUPGRADE[*]:HAS[#solarUpgrade[off]]:LAST[KiwiTechTree] {}


//// SAS Patches \\\\
@PARTUPGRADE[*]:HAS[#type[sas]]:FOR[KiwiTechTree]
{
	sasUpgrade = #$@KIWI_GENERAL_SETTINGS/UPGRADES/SAS$
}
// Deletes the unused part upgrades
!PARTUPGRADE[*]:HAS[#sasUpgrade[off]]:LAST[KiwiTechTree] {}
