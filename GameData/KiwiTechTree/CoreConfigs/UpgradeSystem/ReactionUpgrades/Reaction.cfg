// Kiwi's Tech Tree Overhaul - Reaction Control Wheel Upgrades
// Version 2.0
// Created 30 April 2022 for KSP 1.12.3
// Last Updated: 30 April 2022 for KSP 1.12.3

@PART[*]:HAS[@MODULE[ModuleReactionWheel],~reactionUpgrade[off]]:FOR[zzKiwiTechTree]
{
	@MODULE[ModuleReactionWheel]
	{
		PitchTorque1 = #$PitchTorque$
		PitchTorque2 = #$PitchTorque$
		PitchTorque3 = #$PitchTorque$
		PitchTorque4 = #$PitchTorque$
		
		YawTorque1 = #$YawTorque$
		YawTorque2 = #$YawTorque$
		YawTorque3 = #$YawTorque$
		YawTorque4 = #$YawTorque$
		
		RollTorque1 = #$RollTorque$
		RollTorque2 = #$RollTorque$
		RollTorque3 = #$RollTorque$
		RollTorque4 = #$RollTorque$
		
		@PitchTorque1 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE1_MULTIPLIER$
		@PitchTorque2 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE2_MULTIPLIER$
		@PitchTorque3 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE3_MULTIPLIER$
		@PitchTorque4 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE4_MULTIPLIER$
		
		@YawTorque1 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE1_MULTIPLIER$
		@YawTorque2 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE2_MULTIPLIER$
		@YawTorque3 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE3_MULTIPLIER$
		@YawTorque4 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE4_MULTIPLIER$
		
		@RollTorque1 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE1_MULTIPLIER$
		@RollTorque2 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE2_MULTIPLIER$
		@RollTorque3 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE3_MULTIPLIER$
		@RollTorque4 *= #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE4_MULTIPLIER$
		
		@PitchTorque = #$PitchTorque1$
		@YawTorque = #$YawTorque1$
		@RollTorque = #$RollTorque1$
		
		showUpgradesInModuleInfo = true
		UPGRADES
		{
			UPGRADE
			{
				name__ = reactionUpgrade1
				techRequired__ = flightControl				
				PitchTorque = #$../../PitchTorque2$
				YawTorque = #$../../YawTorque2$
				RollTorque = #$../../RollTorque2$
			}
			UPGRADE
			{
				name__ = reactionUpgrade2
				techRequired__ = specializedControl
				PitchTorque = #$../../PitchTorque3$
				YawTorque = #$../../YawTorque3$
				RollTorque = #$../../RollTorque3$
			}
			UPGRADE
			{
				name__ = reactionUpgrade3
				techRequired__ = exoticControl
				PitchTorque = #$../../PitchTorque4$
				YawTorque = #$../../YawTorque4$
				RollTorque = #$../../RollTorque4$
			}
		}
	}
}

PARTUPGRADE:NEEDS[Squad]
{
	type = reaction
	name = reactionUpgrade1
	partIcon = sasModule
	techRequired = flightControl
	entryCost = 75000
	title = #LOC_KTT_PARTUPGRADE_TITLE_REACTION_LEVEL1 // Reaction Wheel Performance Boost (Level 1)
	manufacturer = #LOC_KTT_PARTUPGRADE_MANUFACTURER // Kiwi Imagineers
	description = #LOC_KTT_PARTUPGRADE_DESCRIPITION_REACTION // Our imagineers have worked tirelessly to improve reaction wheel efficiency to UPGRADE% of original design specs!
}
@PARTUPGRADE[reactionUpgrade1]:HAS[~reactionUpgrade[off]]:AFTER[KiwiTechTree]
{
	reactionText = #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE2_MULTIPLIER$
	@reactionText *= 100
	
	@description ^= #:UPGRADE:$reactionText$:
}

PARTUPGRADE:NEEDS[Squad]
{
	type = reaction
	name = reactionUpgrade2
	partIcon = sasModule
	techRequired = specializedControl
	entryCost = 150000
	title = #LOC_KTT_PARTUPGRADE_TITLE_REACTION_LEVEL2 // Reaction Wheel Performance Boost (Level 2)
	manufacturer = #LOC_KTT_PARTUPGRADE_MANUFACTURER // Kiwi Imagineers
	description = #LOC_KTT_PARTUPGRADE_DESCRIPITION_REACTION// Our imagineers have worked tirelessly to improve reaction wheel efficiency to UPGRADE% of original design specs!
}
@PARTUPGRADE[reactionUpgrade2]:HAS[~reactionUpgrade[off]]:AFTER[KiwiTechTree]
{
	reactionText = #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE3_MULTIPLIER$
	@reactionText *= 100
	
	@description ^= #:UPGRADE:$reactionText$:
}

PARTUPGRADE:NEEDS[Squad]
{
	type = reaction
	name = reactionUpgrade3
	partIcon = sasModule
	techRequired = exoticControl
	entryCost = 300000
	title = #LOC_KTT_PARTUPGRADE_TITLE_REACTION_LEVEL3 // Reaction Wheel Performance Boost (Level 3)
	manufacturer = #LOC_KTT_PARTUPGRADE_MANUFACTURER // Kiwi Imagineers
	description = #LOC_KTT_PARTUPGRADE_DESCRIPITION_REACTION// Our imagineers have worked tirelessly to improve reaction wheel efficiency to UPGRADE% of original design specs!
}
@PARTUPGRADE[reactionUpgrade3]:HAS[~reactionUpgrade[off]]:AFTER[KiwiTechTree]
{
	reactionText = #$@KIWI_REACTION_SETTINGS/STRENGTH_UPGRADE4_MULTIPLIER$
	@reactionText *= 100
	
	@description ^= #:UPGRADE:$reactionText$:
}